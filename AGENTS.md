# ĞŸÑ€Ğ¾ĞµĞºÑ‚: Oxide Agent

Ğ­Ñ‚Ğ¾Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ±Ğ¾Ğ¹ Telegram-Ğ±Ğ¾Ñ‚Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ñ Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼Ğ¸ API Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ÑĞ·Ñ‹ĞºĞ¾Ğ²Ñ‹Ñ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ (LLM) Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼ Ğ¼Ğ½Ğ¾Ğ³Ğ¾Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ˜Ğ˜-Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ°. Ğ‘Ğ¾Ñ‚ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ, Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ğµ, Ğ²Ğ¸Ğ´ĞµĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ° Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ² Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ¿ĞµÑĞ¾Ñ‡Ğ½Ğ¸Ñ†Ğµ.

Ğ‘Ğ¾Ñ‚ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ **Rust 1.92**, Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ `teloxide`, AWS SDK Ğ´Ğ»Ñ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ñ Cloudflare R2, Ğ¸ Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ°Ğ¼Ğ¸ Ğ˜Ğ˜ (Groq, Mistral AI, Google Gemini, OpenRouter, ZAI/Zhipu AI).

## Branch

The default branch in this repo is `testing`.

## ğŸ— Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
crates/
â”œâ”€â”€ oxide-agent-core/                # Ğ¯Ğ´Ñ€Ğ¾: Ğ´Ğ¾Ğ¼ĞµĞ½, LLM, storage, Ñ‚ĞµÑÑ‚Ñ‹
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib.rs
â”‚   â”‚   â”œâ”€â”€ config.rs                # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
â”‚   â”‚   â”œâ”€â”€ storage.rs               # StorageProvider trait + R2 impl
â”‚   â”‚   â”œâ”€â”€ testing.rs               # TestKit: Ğ¼Ğ¾ĞºĞ¸ Ğ¸ Ñ…ĞµĞ»Ğ¿ĞµÑ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ utils.rs
â”‚   â”‚   â”œâ”€â”€ agent/                   # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ runner/              # Ğ¦Ğ¸ĞºĞ» Ğ¸ÑĞ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ (Loop, Hooks)
â”‚   â”‚   â”‚   â”œâ”€â”€ loop_detection/      # Ğ”ĞµÑ‚ĞµĞºÑ‚Ğ¾Ñ€ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
â”‚   â”‚   â”‚   â”œâ”€â”€ prompt/              # ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½Ğ¾Ğ²Ñ‰Ğ¸Ğº Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ² (Composer)
â”‚   â”‚   â”‚   â”œâ”€â”€ skills/              # Ğ ĞµĞµÑÑ‚Ñ€ Ğ¸ Ğ¿Ğ¾Ğ¸ÑĞº Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ²
â”‚   â”‚   â”‚   â”œâ”€â”€ recovery.rs          # Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ XML/JSON
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ llm/                     # Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ AI
â”‚   â”‚   â”‚   â”œâ”€â”€ client.rs            # LlmClient (Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ¼Ğ¾ĞºĞ¾Ğ²)
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/           # Groq, Mistral, ZAI, OpenRouter
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ sandbox/                 # Docker-Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€
â”‚   â””â”€â”€ tests/                       # Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹
â”‚       â”œâ”€â”€ hermetic_agent.rs        # Hermetic logic tests
â”‚       â”œâ”€â”€ proptest_recovery.rs     # Fuzzing tests
â”‚       â”œâ”€â”€ snapshot_prompts.rs      # Snapshot tests
â”‚       â””â”€â”€ ...
â”œâ”€â”€ oxide-agent-runtime/             # Runtime: ÑĞµÑÑĞ¸Ğ¸ Ğ¸ Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ session_registry.rs      # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
â”‚   â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”‚   â””â”€â”€ runtime/             # Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ AgentRuntime
â”‚   â”‚   â””â”€â”€ sandbox/                 # Runtime-ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¿ĞµÑĞ¾Ñ‡Ğ½Ğ¸Ñ†Ñ‹
â”œâ”€â”€ oxide-agent-transport-telegram/  # Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚: Telegram Bot API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ runner.rs                # Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ° Ğ¸ DI
â”‚   â”‚   â”œâ”€â”€ bot/
â”‚   â”‚   â”‚   â”œâ”€â”€ handlers.rs          # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
â”‚   â”‚   â”‚   â”œâ”€â”€ agent_handlers.rs    # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚Ñƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ agent_transport.rs   # Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ AgentTransport
â”‚   â”‚   â”‚   â””â”€â”€ ...
â””â”€â”€ oxide-agent-telegram-bot/        # Application Entry Point
    â””â”€â”€ src/
        â””â”€â”€ main.rs                  # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
sandbox/
â””â”€â”€ Dockerfile.sandbox               # ĞĞ±Ñ€Ğ°Ğ· Ğ¿ĞµÑĞ¾Ñ‡Ğ½Ğ¸Ñ†Ñ‹ (Ubuntu + Python/Node)
.github/workflows/
â””â”€â”€ ci-cd.yml                        # GitHub Actions (Build, Test, Deploy)
docker-compose.yml                   # Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº
Dockerfile                           # Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Rust-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
```

### Workspace crates
- `oxide-agent-core`: Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ°Ğ³ĞµĞ½Ñ‚Ğ°, LLM-Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸, Ñ…ÑƒĞºĞ¸, Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸, storage.
- `oxide-agent-runtime`: Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ ÑĞµÑÑĞ¸Ğ¹, Ñ†Ğ¸ĞºĞ» Ğ¸ÑĞ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ, Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ñ‹ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ², sandbox.
- `oxide-agent-transport-telegram`: Telegram transport, UI/handlers, Ñ‚ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ñ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸.
- `oxide-agent-telegram-bot`: Ğ±Ğ¸Ğ½Ğ°Ñ€ÑŒ Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ¾Ğ¼ Telegram Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğ°.

## ğŸ¦€ Rust Architecture & Workflow

### 1. Architecture & Structure
- **Feature Isolation**: `oxide-agent-core` Ğ¸ `oxide-agent-runtime` Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ·Ğ°Ğ²Ğ¸ÑĞµÑ‚ÑŒ Ğ¾Ñ‚ Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğ½Ñ‹Ñ… crate; Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ñ‹ Ğ·Ğ°Ğ²Ğ¸ÑÑÑ‚ Ğ¾Ñ‚ core/runtime.
- **Transport Boundaries**: `teloxide` Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² `oxide-agent-transport-telegram` (Ğ¸ Ğ±Ğ¸Ğ½Ğ°Ñ€ÑÑ…, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ĞµĞµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ÑÑ‚).
- **Module Hierarchy**: Ğ’ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ crate ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ ÑĞ²Ğ½Ñ‹Ğµ `mod.rs` Ğ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñ‹ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹.
- **Error Handling**: Use `thiserror` for libraries and `anyhow` for apps.

Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ transport (Discord/Slack), ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ `crates/oxide-agent-transport-<name>`, Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚Ğµ SDK Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ transport crate, Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€ Ğº runtime, Ğ¸ Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ¸Ğ½Ğ°Ñ€ÑŒ `oxide-agent-<name>-bot` Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°.

### 2. Operational Workflow
**Tools are enforced by the environment.**
- **Compilation**: Use `cargo check` for quick validation. Only use `cargo build` for final binaries.
- **Dependencies**: Use `cargo add`, `cargo remove`, `cargo update`.
- **Metadata**: Use `workspace info` for project topology and `cargo info` for crate details.

### 3. Code Quality
- **Linting**: Run `cargo clippy` before finishing a task.
- **Formatting**: Run `cargo fmt` before commit
