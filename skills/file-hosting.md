---
name: file-hosting
description: Загрузка больших файлов через upload_file и получение ссылки.
triggers: [загруз, ссылка, gofile, upload, 50 мб, 4 гб]
allowed_tools: [upload_file]
weight: medium
---
## Хостинг файлов (когда Telegram не принимает):
- **upload_file**: загрузить файл из песочницы в GoFile и получить ссылку для пользователя
  - Используй ВСЕГДА для файлов > 50 МБ (Telegram лимит)
  - Лимит загрузки: 1 ГБ. Если файл больше — задача невыполнима
  - После успешной загрузки файл удаляется из песочницы

## ФАЙЛЫ: Доставка пользователю
- До 50 МБ: `send_file_to_user`
- 50 МБ – 4 ГБ: `upload_file`
- Больше 4 ГБ: задача невыполнима — сообщи пользователю об отказе

## ⚠️ КРИТИЧНО: Очистка песочницы после загрузки

**ОБЯЗАТЕЛЬНЫЕ правила работы с `upload_file`:**

1. **Проверка успешности загрузки:**
   - После вызова `upload_file` **ОБЯЗАТЕЛЬНО** проверь результат инструмента
   - Убедись, что получена корректная ссылка на файл (начинается с `https://`)
   - Если в результате ошибка — **НЕ удаляй** файл, сообщи пользователю о проблеме

2. **Удаление файла после успешной загрузки:**
   - ✅ Если загрузка успешна и ссылка получена — **НЕМЕДЛЕННО удали** файл из песочницы
   - Используй команду: `execute_command` с `rm /workspace/filename`
   - **НЕЛЬЗЯ мусорить в песочнице** — это общий ресурс

3. **Последовательность действий:**
   ```
   1. Вызвать upload_file с путем к файлу
   2. Получить результат и проверить наличие ссылки
   3. Если ссылка есть → удалить файл через execute_command
   4. Если ошибка → НЕ удалять файл, сообщить пользователю
   ```

**Пример правильного workflow:**
```markdown
User: "Загрузи большой файл video.mp4 в облако"

Agent:
1. [Вызывает upload_file для /workspace/video.mp4]
2. [Получает результат: "https://gofile.io/d/abc123"]
3. [Проверяет: ссылка корректна ✅]
4. [Вызывает execute_command: "rm /workspace/video.mp4"]
5. Ответ: "Файл успешно загружен: https://gofile.io/d/abc123. Локальная копия удалена из песочницы."
```

**❌ ОШИБКИ, которых нужно избегать:**
- НЕ удаляй файл ДО проверки результата загрузки
- НЕ оставляй файлы в песочнице после успешной загрузки
- НЕ удаляй файл, если загрузка завершилась ошибкой
