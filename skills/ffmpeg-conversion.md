---
name: ffmpeg-conversion
description: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ffmpeg (—Ç–æ–ª—å–∫–æ —Å–æ—Ñ—Ç–≤–µ—Ä–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ).
triggers: [ffmpeg, –∫–æ–Ω–≤–µ—Ä—Ç, –∫–æ–¥–∏—Ä–æ–≤–∞, —Ç—Ä–∞–Ω—Å–∫–æ–¥, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, mp4, mkv, avi, webm, mp3, aac, flac, wav, –∫–æ–¥–µ–∫, –±–∏—Ç—Ä–µ–π—Ç]
allowed_tools: [execute_command, read_file, write_file, send_file_to_user, list_files]
weight: on_demand
---
## FFmpeg - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ

FFmpeg –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –ø–µ—Å–æ—á–Ω–∏—Ü–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **—Ç–æ–ª—å–∫–æ —Å–æ—Ñ—Ç–≤–µ—Ä–Ω–æ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è** (–±–µ–∑ GPU/–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –∫–æ–¥–µ–∫–æ–≤).

### üé¨ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ

#### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
```bash
# MP4 ‚Üí MKV (–±–µ–∑ –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è)
ffmpeg -i input.mp4 -c copy output.mkv

# AVI ‚Üí MP4 (–±–µ–∑ –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è)
ffmpeg -i input.avi -c copy output.mp4
```

#### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤–∏–¥–µ–æ
```bash
# –õ—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç ‚Üí MP4 (H.264 —Å–æ—Ñ—Ç–≤–µ—Ä–Ω—ã–π –∫–æ–¥–µ–∫, –∫–∞—á–µ—Å—Ç–≤–æ CRF 23)
ffmpeg -i input.mkv -c:v libx264 -crf 23 -preset medium -c:a copy output.mp4

# –õ—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç ‚Üí WebM (VP9 —Å–æ—Ñ—Ç–≤–µ—Ä–Ω—ã–π –∫–æ–¥–µ–∫)
ffmpeg -i input.mp4 -c:v libvpx-vp9 -crf 30 -b:v 0 -c:a libopus output.webm

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (1080p ‚Üí 720p)
ffmpeg -i input.mp4 -vf scale=1280:720 -c:v libx264 -crf 23 -preset medium -c:a copy output.mp4

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º FPS (60fps ‚Üí 30fps)
ffmpeg -i input.mp4 -r 30 -c:v libx264 -crf 23 -preset medium -c:a copy output.mp4
```

#### –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–æ—Ñ—Ç–≤–µ—Ä–Ω—ã–µ –≤–∏–¥–µ–æ–∫–æ–¥–µ–∫–∏
- **libx264** - H.264/AVC (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
- **libx265** - H.265/HEVC (–ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ, –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
- **libvpx-vp9** - VP9 (open-source, –¥–ª—è WebM)
- **libaom-av1** - AV1 (–Ω–æ–≤–µ–π—à–∏–π, –ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ, –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–π)

### üéµ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—É–¥–∏–æ

#### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—É–¥–∏–æ
```bash
# –õ—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç ‚Üí MP3 (CBR 192 kbps)
ffmpeg -i input.wav -c:a libmp3lame -b:a 192k output.mp3

# –õ—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç ‚Üí AAC (VBR quality 2, ~128 kbps)
ffmpeg -i input.flac -c:a aac -q:a 2 output.m4a

# –õ—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç ‚Üí FLAC (lossless)
ffmpeg -i input.mp3 -c:a flac output.flac

# –õ—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç ‚Üí Opus (VBR 128 kbps)
ffmpeg -i input.wav -c:a libopus -b:a 128k output.opus

# WAV ‚Üí MP3 (VBR quality 0, ~245 kbps)
ffmpeg -i input.wav -c:a libmp3lame -q:a 0 output.mp3
```

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ
```bash
# –ò–∑–≤–ª–µ—á—å –∞—É–¥–∏–æ –≤ MP3
ffmpeg -i video.mp4 -vn -c:a libmp3lame -b:a 192k audio.mp3

# –ò–∑–≤–ª–µ—á—å –∞—É–¥–∏–æ –±–µ–∑ –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
ffmpeg -i video.mkv -vn -c:a copy audio.aac
```

### ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞

#### –í–∏–¥–µ–æ (H.264/H.265)
- **CRF (Constant Rate Factor)**: 0-51, –º–µ–Ω—å—à–µ = –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ
  - `18` - –≤–∏–∑—É–∞–ª—å–Ω–æ –±–µ–∑ –ø–æ—Ç–µ—Ä—å
  - `23` - **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π** –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä
  - `28` - –∑–∞–º–µ—Ç–Ω–æ–µ —Å–∂–∞—Ç–∏–µ
- **Preset**: —Å–∫–æ—Ä–æ—Å—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
  - `ultrafast`, `superfast`, `veryfast`, `faster`, `fast`
  - `medium` - **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π** –±–∞–ª–∞–Ω—Å
  - `slow`, `slower`, `veryslow` - –ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ

#### –ê—É–¥–∏–æ
- **MP3 –±–∏—Ç—Ä–µ–π—Ç**: 128k (–Ω–æ—Ä–º–∞–ª—å–Ω–æ), 192k (—Ö–æ—Ä–æ—à–æ), 320k (–æ—Ç–ª–∏—á–Ω–æ)
- **MP3 VBR**: `-q:a 0` (–ª—É—á—à–µ) –¥–æ `-q:a 9` (—Ö—É–∂–µ)
- **AAC VBR**: `-q:a 0` (–ª—É—á—à–µ) –¥–æ `-q:a 9` (—Ö—É–∂–µ)

### üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –û–±—Ä–µ–∑–∫–∞ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
```bash
# –û–±—Ä–µ–∑–∞—Ç—å —Å 00:01:30 –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é 45 —Å–µ–∫—É–Ω–¥
ffmpeg -i input.mp4 -ss 00:01:30 -t 45 -c copy output.mp4

# –û–±—Ä–µ–∑–∞—Ç—å —Å –Ω–∞—á–∞–ª–∞ –¥–æ 1 –º–∏–Ω—É—Ç—ã
ffmpeg -i input.mp4 -t 60 -c copy output.mp4
```

#### –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
echo "file 'part1.mp4'" > list.txt
echo "file 'part2.mp4'" >> list.txt

# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å
ffmpeg -f concat -safe 0 -i list.txt -c copy output.mp4
```

#### –ó–∞–º–µ–Ω–∞ –∞—É–¥–∏–æ –≤ –≤–∏–¥–µ–æ
```bash
# –ó–∞–º–µ–Ω–∏—Ç—å –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫—É
ffmpeg -i video.mp4 -i audio.mp3 -c:v copy -c:a aac -map 0:v:0 -map 1:a:0 output.mp4
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∏—Ç—Ä–µ–π—Ç–∞ –≤–∏–¥–µ–æ
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏—Ç—Ä–µ–π—Ç 2 Mbps
ffmpeg -i input.mp4 -b:v 2M -c:a copy output.mp4
```

### üìä –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ–¥–∏–∞—Ñ–∞–π–ª–µ
ffmpeg -i input.mp4

# –¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (ffprobe)
ffprobe -v quiet -print_format json -show_format -show_streams input.mp4
```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–°–û–§–¢–í–ï–†–ù–û–ï —É—Å–∫–æ—Ä–µ–Ω–∏–µ:**
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π** –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–æ–¥–µ–∫–∏: `-c:v h264_nvenc`, `-c:v h264_qsv`, `-c:v h264_vaapi`, `-hwaccel cuda`
- ‚úÖ **–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π** —Å–æ—Ñ—Ç–≤–µ—Ä–Ω—ã–µ –∫–æ–¥–µ–∫–∏: `libx264`, `libx265`, `libvpx-vp9`, `libaom-av1`

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ—Ñ—Ç–≤–µ—Ä–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ (–æ—Å–æ–±–µ–Ω–Ω–æ H.265 –∏ AV1)
- –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –∂–¥–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π `preset medium` –∏–ª–∏ `fast` –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞

**–ü–µ—Ä–µ–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤:**
- FFmpeg —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏: –¥–æ–±–∞–≤–ª—è–π `-y` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏
```bash
ffmpeg -y -i input.mp4 -c:v libx264 output.mp4
```

**–†–∞–±–æ—Ç–∞ —Å –ø—É—Ç—è–º–∏:**
- –ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π `send_file_to_user` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—è–π –Ω–∞–ª–∏—á–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ `list_files` –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –ï—Å–ª–∏ FFmpeg –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É ‚Äî –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–æ–æ–±—â–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—á–∏–Ω—É
- –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–æ–¥–µ–∫, –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª, –Ω–µ—Ö–≤–∞—Ç–∫–∞ –º–µ—Å—Ç–∞
- –ù–ï –ø—ã—Ç–∞–π—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É –ø—Ä–∏ —Ñ–∞—Ç–∞–ª—å–Ω–æ–π –æ—à–∏–±–∫–µ

### üìù –ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á

**–ü—Ä–∏–º–µ—Ä 1: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å MKV –≤ MP4 –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏**
```bash
# –ü–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ –≤ H.264, –∞—É–¥–∏–æ –≤ AAC
ffmpeg -y -i video.mkv -c:v libx264 -crf 23 -preset medium -c:a aac -b:a 192k video.mp4
```

**–ü—Ä–∏–º–µ—Ä 2: –°–∂–∞—Ç—å –±–æ–ª—å—à–æ–µ –≤–∏–¥–µ–æ**
```bash
# –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ 720p –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å CRF 28
ffmpeg -y -i large_video.mp4 -vf scale=1280:720 -c:v libx264 -crf 28 -preset medium -c:a copy compressed.mp4
```

**–ü—Ä–∏–º–µ—Ä 3: –ò–∑–≤–ª–µ—á—å –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ –≤ FLAC**
```bash
ffmpeg -y -i concert.mkv -vn -c:a flac concert.flac
```

**–ü—Ä–∏–º–µ—Ä 4: –°–æ–∑–¥–∞—Ç—å GIF –∏–∑ –≤–∏–¥–µ–æ**
```bash
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–µ 5 —Å–µ–∫—É–Ω–¥ –≤ GIF 480p, 10 fps
ffmpeg -y -i input.mp4 -t 5 -vf "fps=10,scale=480:-1:flags=lanczos" -c:v gif output.gif
```

**–ü—Ä–∏–º–µ—Ä 5: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç AV1**
```bash
# –í–ù–ò–ú–ê–ù–ò–ï: AV1 –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –¥–ª—è —Å–æ—Ñ—Ç–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è!
ffmpeg -y -i input.mp4 -c:v libaom-av1 -crf 30 -b:v 0 -c:a libopus -b:a 128k output.mkv
```
