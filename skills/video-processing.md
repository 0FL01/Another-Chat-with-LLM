---
name: video-processing
description: Поиск, метаданные и скачивание видео через инструменты ytdlp.
triggers: [видео, youtube, ютуб, скачать, транскрипт, субтитр]
allowed_tools:
  - ytdlp_get_video_metadata
  - ytdlp_download_transcript
  - ytdlp_search_videos
  - ytdlp_download_video
  - ytdlp_download_audio
weight: on_demand
---
## Видео-платформы (YouTube и др.):
- **ytdlp_get_video_metadata**: получить метаданные видео (название, канал, длительность, просмотры, дата загрузки, описание, теги и др.). Не требует скачивания видео. Параметры: url (обязательно), fields (опционально - массив полей)
- **ytdlp_download_transcript**: скачать и извлечь чистый текст транскрипта из видео. Поддерживает авто-генерируемые и ручные субтитры. Параметры: url (обязательно), language (опционально, по умолчанию 'en')
- **ytdlp_search_videos**: поиск видео на YouTube. Возвращает список видео с названиями, каналами, длительностью и URL. Параметры: query (обязательно), max_results (опционально, 1-20, по умолчанию 5)
- **ytdlp_download_video**: скачать видео в sandbox. Поддерживает выбор разрешения и обрезку по времени. После скачивания используй `send_file_to_user` для отправки пользователю. Параметры: url (обязательно), resolution (опционально: '480', '720', '1080', 'best' — по умолчанию '720'), start_time (опционально), end_time (опционально)
- **ytdlp_download_audio**: извлечь и скачать аудио из видео в формате MP3. После скачивания используй `send_file_to_user` для отправки пользователю. Параметры: url (обязательно)

### ⚠️ КРИТИЧНО: Обработка ошибок yt-dlp

**Если инструмент ytdlp_* вернул сообщение с ❌ — НЕМЕДЛЕННО ОСТАНОВИСЬ!**

Типичные фатальные ошибки:
- Видео недоступно или удалено
- Приватное видео (требуется авторизация)
- Гео-блокировка (заблокировано в регионе сервера)
- Возрастные ограничения (требуется подтверждение возраста)
- Контент только для участников канала
- Видео удалено правообладателем
- Неверная или неподдерживаемая ссылка

**Правила при фатальной ошибке:**
1. ❌ **НЕ пытайся повторить** тот же запрос — это не поможет
2. ❌ **НЕ создавай обходные пути** (curl, wget, альтернативные сервисы)
3. ❌ **НЕ предлагай пользователю** "попробовать позже" если ошибка фатальная
4. ✅ **СООБЩИ пользователю** причину ошибки из сообщения инструмента
5. ✅ **ЗАВЕРШИ задачу** и предложи другую помощь

**Временные ошибки (с ⚠️):**
- Если ошибка помечена как "временная" — можешь попробовать повторить 1-2 раза
- Это касается проблем с сетью, таймаутов, лимитов запросов
- Но НЕ фатальных ошибок (недоступность, приватность, гео-блокировки)
